# 重构

你看看这个代码
```js
handleFactorChange = (model, update, data) => {
    // 存 主诉、现病史
    if (model === 'chiefComplaint') {
      data.belongCase = 101;
    } else if (model === 'nowMedicalHistory') {
      data.belongCase = 102;
    }
    let { params } = this.state;
    const attr = data.attributes[0];
    const associationWord = params[model].split(/[^\u4E00-\u9FA5A-Za-z0-9]+/)
    const lastWord = associationWord[associationWord.length -1];
    const newLinkStr = `${data.diagnoseFactorName}${attr && attr.value.length && attr.unit !== '' ? `${attr.value[0]}${attr.unit}` : ''}`;
    if ((data.factorNameFirstPinyin && data.factorNameFirstPinyin.indexOf(lastWord.toLowerCase()) === 0)  || data.diagnoseFactorName.indexOf(lastWord) === 0) {
      // 替换
      params[model] = params[model].replace(lastWord, newLinkStr);
    } else if (params[model] !== '') {
      params[model] = `${params[model]}，${newLinkStr}`;
    } else {
      params[model] = `${newLinkStr}`;
    }
		params.associationWord = `${newLinkStr}`;
		this.setState({ params })
}
```

你在看看这个代码写的
```javascript
```